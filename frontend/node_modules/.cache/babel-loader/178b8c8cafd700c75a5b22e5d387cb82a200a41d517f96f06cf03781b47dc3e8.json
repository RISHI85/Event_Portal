{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sairi\\\\Desktop\\\\main_project\\\\frontend\\\\src\\\\pages\\\\Payment.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { loadStripe } from '@stripe/stripe-js';\nimport { Elements, PaymentElement, useElements, useStripe } from '@stripe/react-stripe-js';\nimport api from '../utils/api';\nimport toast from 'react-hot-toast';\nimport './Payment.css';\n\n// Defer creating the Stripe instance until we have a valid publishable key\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst getStripePromise = pk => pk ? loadStripe(pk) : null;\nconst CheckoutForm = ({\n  registration,\n  clientSecret\n}) => {\n  _s();\n  var _registration$totalFe;\n  const stripe = useStripe();\n  const elements = useElements();\n  const navigate = useNavigate();\n  const [submitting, setSubmitting] = useState(false);\n  const [message, setMessage] = useState('');\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setMessage('');\n    if (!stripe || !elements) return;\n    setSubmitting(true);\n    try {\n      const {\n        error,\n        paymentIntent\n      } = await stripe.confirmPayment({\n        elements,\n        confirmParams: {\n          return_url: window.location.origin + '/my-events'\n        },\n        redirect: 'if_required'\n      });\n      if (error) {\n        setMessage(error.message || 'Payment failed');\n        setSubmitting(false);\n      } else if (paymentIntent && paymentIntent.status === 'succeeded') {\n        setMessage('Payment successful! Updating registration...');\n        toast.success('Payment successful!');\n\n        // Update payment status in backend\n        try {\n          await api.post(`/api/registrations/${registration._id}/confirm-payment`, {\n            paymentIntentId: paymentIntent.id\n          });\n          toast.success('Registration confirmed! Redirecting...');\n          setTimeout(() => {\n            navigate('/my-events');\n          }, 1500);\n        } catch (err) {\n          console.error('Failed to update payment status:', err);\n          toast.error('Payment successful but failed to update status. Please refresh.');\n          // Still navigate even if update fails\n          setTimeout(() => {\n            navigate('/my-events');\n          }, 2000);\n        }\n      } else {\n        setMessage('Payment processing');\n        setSubmitting(false);\n      }\n    } catch (err) {\n      console.error('Payment error:', err);\n      setMessage('Payment failed. Please try again.');\n      setSubmitting(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"payment-form-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"payment-form-title\",\n        children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n          width: \"24\",\n          height: \"24\",\n          viewBox: \"0 0 24 24\",\n          fill: \"none\",\n          xmlns: \"http://www.w3.org/2000/svg\",\n          children: [/*#__PURE__*/_jsxDEV(\"rect\", {\n            x: \"2\",\n            y: \"5\",\n            width: \"20\",\n            height: \"14\",\n            rx: \"2\",\n            stroke: \"currentColor\",\n            strokeWidth: \"2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n            d: \"M2 10h20\",\n            stroke: \"currentColor\",\n            strokeWidth: \"2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this), \"Select Payment Method\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(PaymentElement, {\n        options: {\n          layout: 'tabs',\n          paymentMethodOrder: ['card', 'upi', 'netbanking']\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), message && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `payment-message ${message.includes('successful') ? 'success' : 'error'}`,\n      children: [message.includes('successful') ? 'âœ“' : 'âš ', message]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"payment-actions\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: \"payment-btn payment-btn-secondary\",\n        onClick: () => navigate('/my-events'),\n        disabled: submitting,\n        children: \"Cancel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"payment-btn payment-btn-primary\",\n        disabled: !stripe || submitting,\n        children: submitting ? 'Processingâ€¦' : `Pay â‚¹${(_registration$totalFe = registration === null || registration === void 0 ? void 0 : registration.totalFee) !== null && _registration$totalFe !== void 0 ? _registration$totalFe : ''}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"payment-security-info\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\uD83D\\uDD12 Secure payment powered by Stripe \\u2022 Your payment information is encrypted\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n};\n_s(CheckoutForm, \"XxcqI6Rx4u+LYSnz5meHp3SLJKs=\", false, function () {\n  return [useStripe, useElements, useNavigate];\n});\n_c = CheckoutForm;\nconst Payment = () => {\n  _s2();\n  var _registration$eventId, _registration$eventId2;\n  const {\n    registrationId\n  } = useParams();\n  const navigate = useNavigate();\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [registration, setRegistration] = useState(null);\n  const [clientSecret, setClientSecret] = useState(null);\n  const publishableKey = process.env.REACT_APP_STRIPE_PUBLISHABLE_KEY;\n  const stripePromise = useMemo(() => getStripePromise(publishableKey), [publishableKey]);\n  useEffect(() => {\n    const load = async () => {\n      try {\n        const {\n          data\n        } = await api.get(`/api/registrations/${registrationId}`);\n        setRegistration(data.registration);\n        setClientSecret(data.clientSecret);\n      } catch (e) {\n        var _e$response, _e$response$data;\n        setError(((_e$response = e.response) === null || _e$response === void 0 ? void 0 : (_e$response$data = _e$response.data) === null || _e$response$data === void 0 ? void 0 : _e$response$data.message) || e.message || 'Failed to load payment');\n      } finally {\n        setLoading(false);\n      }\n    };\n    load();\n  }, [registrationId]);\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading payment\\u2026\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 50\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 143,\n    columnNumber: 23\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: /*#__PURE__*/_jsxDEV(\"p\", {\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 48\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 144,\n    columnNumber: 21\n  }, this);\n  if (!registration) return null;\n\n  // No payment required (free or below threshold)\n  if (!clientSecret) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Payment\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Registration ID: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: registrationId\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No payment required for this registration.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-actions\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-primary\",\n          onClick: () => navigate('/my-events'),\n          children: \"Done\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 7\n    }, this);\n  }\n\n  // If Stripe publishable key is missing, show a helpful message instead of crashing\n  if (!publishableKey) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Payment\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Registration ID: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: registrationId\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: '#fff7ed',\n          border: '1px solid #fed7aa',\n          color: '#9a3412',\n          padding: 12,\n          borderRadius: 8,\n          margin: '12px 0'\n        },\n        children: [\"Missing Stripe publishable key. Please set \", /*#__PURE__*/_jsxDEV(\"code\", {\n          children: \"REACT_APP_STRIPE_PUBLISHABLE_KEY\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 54\n        }, this), \" in your frontend \", /*#__PURE__*/_jsxDEV(\"code\", {\n          children: \".env\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 117\n        }, this), \" file and restart the dev server.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-actions\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-secondary\",\n          onClick: () => navigate('/my-events'),\n          children: \"Back\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"payment-page\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"payment-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"payment-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Complete Payment\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Secure checkout for your event registration\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"payment-secure-badge\",\n          children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n            width: \"16\",\n            height: \"16\",\n            viewBox: \"0 0 24 24\",\n            fill: \"none\",\n            xmlns: \"http://www.w3.org/2000/svg\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z\",\n              stroke: \"currentColor\",\n              strokeWidth: \"2\",\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 185,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 13\n          }, this), \"Powered by Stripe\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"payment-grid\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(Elements, {\n            stripe: stripePromise,\n            options: {\n              clientSecret,\n              appearance: {\n                theme: 'stripe',\n                variables: {\n                  colorPrimary: '#14b8a6',\n                  colorBackground: '#ffffff',\n                  colorText: '#1f2937',\n                  colorDanger: '#ef4444',\n                  fontFamily: 'system-ui, sans-serif',\n                  borderRadius: '10px',\n                  spacingUnit: '4px'\n                }\n              }\n            },\n            children: /*#__PURE__*/_jsxDEV(CheckoutForm, {\n              registration: registration,\n              clientSecret: clientSecret\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 208,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"payment-summary-card\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"payment-summary-title\",\n            children: \"Order Summary\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"payment-summary-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"payment-summary-label\",\n              children: \"Event\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"payment-summary-value event-name\",\n              children: (registration === null || registration === void 0 ? void 0 : (_registration$eventId = registration.eventId) === null || _registration$eventId === void 0 ? void 0 : _registration$eventId.name) || 'Event Registration'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"payment-summary-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"payment-summary-label\",\n              children: \"Registration ID\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"payment-summary-value registration-id\",\n              children: [registrationId === null || registrationId === void 0 ? void 0 : registrationId.slice(0, 8), \"...\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 224,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 13\n          }, this), (registration === null || registration === void 0 ? void 0 : registration.teamName) && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"payment-summary-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"payment-summary-label\",\n              children: \"Team Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"payment-summary-value\",\n              children: registration.teamName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 15\n          }, this), (registration === null || registration === void 0 ? void 0 : (_registration$eventId2 = registration.eventId) === null || _registration$eventId2 === void 0 ? void 0 : _registration$eventId2.date) && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"payment-summary-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"payment-summary-label\",\n              children: \"Event Date\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 238,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"payment-summary-value\",\n              children: new Date(registration.eventId.date).toLocaleDateString('en-US', {\n                month: 'long',\n                day: 'numeric',\n                year: 'numeric'\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 239,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"payment-total\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"payment-total-label\",\n              children: \"Total Amount\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 250,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"payment-total-amount\",\n              children: [\"\\u20B9\", registration === null || registration === void 0 ? void 0 : registration.totalFee]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 251,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"payment-features\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"payment-feature\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"payment-feature-icon\",\n            children: \"\\uD83D\\uDD12\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 258,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"payment-feature-text\",\n            children: \"Secure Payment\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"payment-feature\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"payment-feature-icon\",\n            children: \"\\u26A1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"payment-feature-text\",\n            children: \"Instant Confirmation\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"payment-feature\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"payment-feature-icon\",\n            children: \"\\uD83D\\uDCE7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"payment-feature-text\",\n            children: \"Email Receipt\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 178,\n    columnNumber: 5\n  }, this);\n};\n_s2(Payment, \"qSNKXN7agr389LcnOaDtBHvbwmc=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c2 = Payment;\nexport default Payment;\nvar _c, _c2;\n$RefreshReg$(_c, \"CheckoutForm\");\n$RefreshReg$(_c2, \"Payment\");","map":{"version":3,"names":["React","useEffect","useMemo","useState","useNavigate","useParams","loadStripe","Elements","PaymentElement","useElements","useStripe","api","toast","jsxDEV","_jsxDEV","getStripePromise","pk","CheckoutForm","registration","clientSecret","_s","_registration$totalFe","stripe","elements","navigate","submitting","setSubmitting","message","setMessage","handleSubmit","e","preventDefault","error","paymentIntent","confirmPayment","confirmParams","return_url","window","location","origin","redirect","status","success","post","_id","paymentIntentId","id","setTimeout","err","console","onSubmit","children","className","width","height","viewBox","fill","xmlns","x","y","rx","stroke","strokeWidth","fileName","_jsxFileName","lineNumber","columnNumber","d","options","layout","paymentMethodOrder","includes","type","onClick","disabled","totalFee","_c","Payment","_s2","_registration$eventId","_registration$eventId2","registrationId","loading","setLoading","setError","setRegistration","setClientSecret","publishableKey","process","env","REACT_APP_STRIPE_PUBLISHABLE_KEY","stripePromise","load","data","get","_e$response","_e$response$data","response","style","background","border","color","padding","borderRadius","margin","strokeLinecap","strokeLinejoin","appearance","theme","variables","colorPrimary","colorBackground","colorText","colorDanger","fontFamily","spacingUnit","eventId","name","slice","teamName","date","Date","toLocaleDateString","month","day","year","_c2","$RefreshReg$"],"sources":["C:/Users/sairi/Desktop/main_project/frontend/src/pages/Payment.jsx"],"sourcesContent":["import React, { useEffect, useMemo, useState } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { loadStripe } from '@stripe/stripe-js';\nimport { Elements, PaymentElement, useElements, useStripe } from '@stripe/react-stripe-js';\nimport api from '../utils/api';\nimport toast from 'react-hot-toast';\nimport './Payment.css';\n\n// Defer creating the Stripe instance until we have a valid publishable key\nconst getStripePromise = (pk) => (pk ? loadStripe(pk) : null);\n\nconst CheckoutForm = ({ registration, clientSecret }) => {\n  const stripe = useStripe();\n  const elements = useElements();\n  const navigate = useNavigate();\n  const [submitting, setSubmitting] = useState(false);\n  const [message, setMessage] = useState('');\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setMessage('');\n    if (!stripe || !elements) return;\n    setSubmitting(true);\n    \n    try {\n      const { error, paymentIntent } = await stripe.confirmPayment({\n        elements,\n        confirmParams: {\n          return_url: window.location.origin + '/my-events'\n        },\n        redirect: 'if_required',\n      });\n      \n      if (error) {\n        setMessage(error.message || 'Payment failed');\n        setSubmitting(false);\n      } else if (paymentIntent && paymentIntent.status === 'succeeded') {\n        setMessage('Payment successful! Updating registration...');\n        toast.success('Payment successful!');\n        \n        // Update payment status in backend\n        try {\n          await api.post(`/api/registrations/${registration._id}/confirm-payment`, {\n            paymentIntentId: paymentIntent.id\n          });\n          \n          toast.success('Registration confirmed! Redirecting...');\n          setTimeout(() => {\n            navigate('/my-events');\n          }, 1500);\n        } catch (err) {\n          console.error('Failed to update payment status:', err);\n          toast.error('Payment successful but failed to update status. Please refresh.');\n          // Still navigate even if update fails\n          setTimeout(() => {\n            navigate('/my-events');\n          }, 2000);\n        }\n      } else {\n        setMessage('Payment processing');\n        setSubmitting(false);\n      }\n    } catch (err) {\n      console.error('Payment error:', err);\n      setMessage('Payment failed. Please try again.');\n      setSubmitting(false);\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <div className=\"payment-form-section\">\n        <h3 className=\"payment-form-title\">\n          <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <rect x=\"2\" y=\"5\" width=\"20\" height=\"14\" rx=\"2\" stroke=\"currentColor\" strokeWidth=\"2\"/>\n            <path d=\"M2 10h20\" stroke=\"currentColor\" strokeWidth=\"2\"/>\n          </svg>\n          Select Payment Method\n        </h3>\n        <PaymentElement options={{ \n          layout: 'tabs',\n          paymentMethodOrder: ['card', 'upi', 'netbanking']\n        }} />\n      </div>\n      \n      {message && (\n        <div className={`payment-message ${message.includes('successful') ? 'success' : 'error'}`}>\n          {message.includes('successful') ? 'âœ“' : 'âš '}\n          {message}\n        </div>\n      )}\n      \n      <div className=\"payment-actions\">\n        <button \n          type=\"button\" \n          className=\"payment-btn payment-btn-secondary\" \n          onClick={() => navigate('/my-events')}\n          disabled={submitting}\n        >\n          Cancel\n        </button>\n        <button \n          type=\"submit\" \n          className=\"payment-btn payment-btn-primary\" \n          disabled={!stripe || submitting}\n        >\n          {submitting ? 'Processingâ€¦' : `Pay â‚¹${registration?.totalFee ?? ''}`}\n        </button>\n      </div>\n      \n      <div className=\"payment-security-info\">\n        <p>ğŸ”’ Secure payment powered by Stripe â€¢ Your payment information is encrypted</p>\n      </div>\n    </form>\n  );\n};\n\nconst Payment = () => {\n  const { registrationId } = useParams();\n  const navigate = useNavigate();\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [registration, setRegistration] = useState(null);\n  const [clientSecret, setClientSecret] = useState(null);\n  const publishableKey = process.env.REACT_APP_STRIPE_PUBLISHABLE_KEY;\n  const stripePromise = useMemo(() => getStripePromise(publishableKey), [publishableKey]);\n\n  useEffect(() => {\n    const load = async () => {\n      try {\n        const { data } = await api.get(`/api/registrations/${registrationId}`);\n        setRegistration(data.registration);\n        setClientSecret(data.clientSecret);\n      } catch (e) {\n        setError(e.response?.data?.message || e.message || 'Failed to load payment');\n      } finally {\n        setLoading(false);\n      }\n    };\n    load();\n  }, [registrationId]);\n\n  if (loading) return <div className=\"container\"><p>Loading paymentâ€¦</p></div>;\n  if (error) return <div className=\"container\"><p>{error}</p></div>;\n  if (!registration) return null;\n\n  // No payment required (free or below threshold)\n  if (!clientSecret) {\n    return (\n      <div className=\"container\">\n        <h2>Payment</h2>\n        <p>Registration ID: <strong>{registrationId}</strong></p>\n        <p>No payment required for this registration.</p>\n        <div className=\"form-actions\">\n          <button className=\"btn-primary\" onClick={() => navigate('/my-events')}>Done</button>\n        </div>\n      </div>\n    );\n  }\n\n  // If Stripe publishable key is missing, show a helpful message instead of crashing\n  if (!publishableKey) {\n    return (\n      <div className=\"container\">\n        <h2>Payment</h2>\n        <p>Registration ID: <strong>{registrationId}</strong></p>\n        <div style={{ background:'#fff7ed', border:'1px solid #fed7aa', color:'#9a3412', padding:12, borderRadius:8, margin:'12px 0' }}>\n          Missing Stripe publishable key. Please set <code>REACT_APP_STRIPE_PUBLISHABLE_KEY</code> in your frontend <code>.env</code> file and restart the dev server.\n        </div>\n        <div className=\"form-actions\">\n          <button className=\"btn-secondary\" onClick={() => navigate('/my-events')}>Back</button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"payment-page\">\n      <div className=\"payment-container\">\n        <div className=\"payment-header\">\n          <h1>Complete Payment</h1>\n          <p>Secure checkout for your event registration</p>\n          <div className=\"payment-secure-badge\">\n            <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n              <path d=\"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n            </svg>\n            Powered by Stripe\n          </div>\n        </div>\n\n        <div className=\"payment-grid\">\n          <div>\n            <Elements stripe={stripePromise} options={{ \n              clientSecret, \n              appearance: { \n                theme: 'stripe',\n                variables: {\n                  colorPrimary: '#14b8a6',\n                  colorBackground: '#ffffff',\n                  colorText: '#1f2937',\n                  colorDanger: '#ef4444',\n                  fontFamily: 'system-ui, sans-serif',\n                  borderRadius: '10px',\n                  spacingUnit: '4px'\n                }\n              } \n            }}>\n              <CheckoutForm registration={registration} clientSecret={clientSecret} />\n            </Elements>\n          </div>\n\n          <div className=\"payment-summary-card\">\n            <h3 className=\"payment-summary-title\">Order Summary</h3>\n            \n            <div className=\"payment-summary-item\">\n              <div className=\"payment-summary-label\">Event</div>\n              <div className=\"payment-summary-value event-name\">\n                {registration?.eventId?.name || 'Event Registration'}\n              </div>\n            </div>\n\n            <div className=\"payment-summary-item\">\n              <div className=\"payment-summary-label\">Registration ID</div>\n              <div className=\"payment-summary-value registration-id\">\n                {registrationId?.slice(0, 8)}...\n              </div>\n            </div>\n\n            {registration?.teamName && (\n              <div className=\"payment-summary-item\">\n                <div className=\"payment-summary-label\">Team Name</div>\n                <div className=\"payment-summary-value\">{registration.teamName}</div>\n              </div>\n            )}\n\n            {registration?.eventId?.date && (\n              <div className=\"payment-summary-item\">\n                <div className=\"payment-summary-label\">Event Date</div>\n                <div className=\"payment-summary-value\">\n                  {new Date(registration.eventId.date).toLocaleDateString('en-US', {\n                    month: 'long',\n                    day: 'numeric',\n                    year: 'numeric'\n                  })}\n                </div>\n              </div>\n            )}\n\n            <div className=\"payment-total\">\n              <div className=\"payment-total-label\">Total Amount</div>\n              <div className=\"payment-total-amount\">â‚¹{registration?.totalFee}</div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"payment-features\">\n          <div className=\"payment-feature\">\n            <div className=\"payment-feature-icon\">ğŸ”’</div>\n            <div className=\"payment-feature-text\">Secure Payment</div>\n          </div>\n          <div className=\"payment-feature\">\n            <div className=\"payment-feature-icon\">âš¡</div>\n            <div className=\"payment-feature-text\">Instant Confirmation</div>\n          </div>\n          <div className=\"payment-feature\">\n            <div className=\"payment-feature-icon\">ğŸ“§</div>\n            <div className=\"payment-feature-text\">Email Receipt</div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Payment;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}